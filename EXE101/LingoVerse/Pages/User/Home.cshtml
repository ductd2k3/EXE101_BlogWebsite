@page
@model LingoVerse.Pages.User.HomeModel
@{
}
<head>
    <link rel="stylesheet" href="~/css/Home.css" asp-append-version="true" />
</head>
<!-- Search and Filter -->
<div class="container search-filter-container">
    <div class="search-bar">
        <form class="d-flex">
            <input class="form-control me-2" asp-for="SearchTerm" type="search" placeholder="Tìm kiếm bài báo..." aria-label="Search">
            <button class="btn" type="submit"><i class="fas fa-search"></i></button>
        </form>
    </div>
    <form method="get">
        <div class="filter-selects">
            <input asp-for="SearchTerm" type="hidden">

            <select class="form-select" asp-for="LanguageId" onchange="this.form.submit()">
                <option value="">Chọn ngôn ngữ</option>
                @foreach (var language in Model.Languages)
                {
                    <option value="@(language.LanguageId)">@(language.LanguageName)</option>
                }
            </select>

            <select class="form-select" asp-for="LevelId" onchange="this.form.submit()">
                <option value="">Chọn cấp độ</option>
                @foreach (var level in Model.Levels)
                {
                    <option value="@(level.LevelId)">@(level.LevelName)</option>
                }
            </select>

            <select id="category" class="form-select" asp-for="CategoryId" onchange="this.form.submit()">
                <option value="">Chọn chủ đề</option>
                @foreach (var category in Model.Categories)
                {
                    <option value="@(category.CategoryId)">@(category.CategoryName)</option>
                }
            </select>
        </div>
    </form>
</div>

<!-- Main Content -->
<div class="container mt-4">
    <div class="row">
        <div class="col-lg-12">
            <!-- Hot News -->
            <div class="hot-news">
                <h2><i class="fas fa-fire"></i>Tin Hot</h2>
                <div class="hot-news-list swiper">
                    <div class="swiper-wrapper">
                        @foreach(var post in Model.Posts.Take(6))
                        {
                            <a href="/User/Post-Detail" class="hot-news-item swiper-slide text-decoration-none">
                                <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=110&w=200" alt="Nouvelle Technologie">
                                <div class="content">
                                    <span class="category-label">@(post.Language.LanguageName) - @(post.Level.LevelName)</span>
                                    <h5>@(post.Title)</h5>
                                    <p>@(post.Content)</p>
                                    <p><small><i class="far fa-clock"></i> 2 giờ trước</small></p>
                                </div>
                            </a>
                        }
                    </div>
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>

            <!-- News Section -->
            <div class="news-section">
                @foreach (var post in Model.Posts.Skip(6).Take(1))
                {
                    <a href="/User/Post-Detail" class="featured-news text-decoration-none">
                        <img src="https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=180&w=300" alt="AI Breakthrough">
                        <div class="content">
                            <span class="category-label">@(post.Language.LanguageName) - @(post.Level.LevelName)</span>
                            <h5 class="card-title">@(post.Title)</h5>
                            <p>@(post.Content)</p>
                            <p><small><i class="far fa-clock"></i> 2 giờ trước</small>
                        </div>
                    </a>
                }
                <div class="double-news">
                    @foreach (var post in Model.Posts.Skip(7).Take(2))
                    {
                        <a href="/User/Post-Detail" class="double-news-item text-decoration-none">
                            <img src="https://images.unsplash.com/photo-1507146153580-69a1fe6d8aa1?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=100&w=150" alt="AI Revolution">
                            <div class="content">
                                <span class="category-label">@(post.Language.LanguageName) - @(post.Level.LevelName)</span>
                                <h5 class="card-title">@(post.Title)</h5>
                                <p>@(post.Content)</p>
                                <p><small><i class="far fa-clock"></i> 3 giờ trước</small></p>
                            </div>
                        </a>
                    }
                </div>
                <div class="news-list">
                    @foreach (var post in Model.Posts.Skip(9).Take(2))
                    {
                        <a href="/User/Post-Detail" class="list-item text-decoration-none">
                            <img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=100&w=150" alt="IA Futur">
                            <div class="content">
                                <span class="category-label">@(post.Language.LanguageName) - @(post.Level.LevelName)</span>
                                <h5 class="card-title">@(post.Title)</h5>
                                <p>@(post.Content)</p>
                                <p><small><i class="far fa-clock"></i> 5 giờ trước</small> <span class="read-more">
                            </div>
                        </a>
                    }
                </div>
            </div>

            <!-- Pagination -->
            <nav aria-label="Page navigation">
                <ul class="pagination mt-4">
                    <li class="page-item disabled"><a class="page-link" href="#">«</a></li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">»</a></li>
                </ul>
            </nav>
        </div>
    </div>
</div>
<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const swiper = new Swiper('.hot-news-list', {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: true,
            autoplay: {
                delay: 3000,
                disableOnInteraction: false,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            breakpoints: {
                768: { slidesPerView: 1 },
                1024: { slidesPerView: 2 }
            }
        });
    });
</script>